# frozen_string_literal: true

div do
  active_admin_form_for @import || import, as: :import, url: import_admin_newsletters_path do |form|
    form.semantic_errors *form.object.errors.attribute_names
    form.inputs 'Details' do
      form.input :kind, as: :select, collection: ['Daily (Mon - Fri)', 'Weekly'], label: 'Kind', include_blank: false
      hint = "Expected csv columns: #{ [Admin::Newsletters::ImportCSV::EMAIL_HEADER].join(', ') }"
      form.input :csv, as: :file, label: 'CSV file', hint: hint.html_safe
    end
    form.actions do
      form.action :submit, button_html: { 'data-disable-with' => 'Uploading...', value: 'Import' }
      form.cancel_link
    end
  end
end
